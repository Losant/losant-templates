application.register("cpf-page-profile", class extends Controller {
    static targets = ['changePassword'];

    connect() {
        if (document.documentElement.hasAttribute('data-turbo-preview')) {
            return;
        }

    };

    onPasswordSubmit(e) {
        const data = new FormData(e.target);
        if (data.get('new_password') !== data.get('confirm_password')) {
            e.preventDefault();
            document.getElementById("confirm_password").setCustomValidity("Passwords don't match");
            document.getElementById("confirm_password").reportValidity();
        } else {
            document.getElementById("confirm_password").setCustomValidity("");
            document.getElementById("confirm_password").reportValidity();
        }
    }

    onNewPasswordChange(e) {
        document.getElementById("confirm_password").setCustomValidity("");
    }
})